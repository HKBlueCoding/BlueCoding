<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
        
<mapper namespace="mapper.book">

	<!-- 테이블 컬럼하고, VO하고 1:1로 맵핑했을때 이름이 다른경우 -->
	<resultMap id="bookResult" type="BookVO">
	
		<result property="bookNO" column="bookNO" />
		<result property="bookTitle" column="bookTitle" />
		<result property="intro" column="intro" />
		<result property="theme" column="theme" />
		<result property="bookImage" column="bookImage" />
		<result property="bookDelete" column="bookDelete" />
		<result property="name" column="name" />
		<result property="id" column="id" />
		<result property="bookDate" column="bookDate" />
		<result property="bViewCnt" column="bViewCnt" />

	</resultMap>
	
	<select id="selectAllBook" resultMap="bookResult">
    <![CDATA[
		SELECT BOOKNO, BOOKTITLE, INTRO, THEME, BOOKIMAGE, BOOKDELETE, NAME, ID, BOOKDATE, BVIEWCNT 
		FROM B_BOOK
    ]]>
	</select>

	<insert id="insertBook" parameterType="BookVO">
	 <selectKey keyProperty="bookNO" resultType="int" order="BEFORE">
	 	SELECT max(bookNO)+1 FROM B_BOOK
	 </selectKey>
	 <![CDATA[
	  INSERT INTO B_BOOK
	  (BOOKNO, BOOKTITLE, INTRO, THEME, BOOKIMAGE, NAME, ID, BOOKDATE, BVIEWCNT)
	   VALUES( #{bookNO}, #{bookTitle}, #{intro}, #{theme}, #{bookImage}, '홍길동', 'abc12345', sysdate, 0)
	 ]]>
	</insert>
	
	<select id="selectOneBook" resultMap="bookResult">
    <![CDATA[
		SELECT * FROM B_BOOK WHERE bookNO=#{bookNO}
    ]]>
	</select>
	
	<update id="updateBook" parameterType="BookVO">
    <![CDATA[
		UPDATE B_BOOK SET BOOKTITLE=#{bookTitle}, INTRO=#{intro}, THEME=#{theme}, BOOKIMAGE=#{bookImage} 
		WHERE BOOKNO=#{bookNO}
    ]]>
	</update>
</mapper>