<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.qna">

	<resultMap id="qnaResult" type="QnaVO">

		<result property="qnaNO" column="qnaNO" />
		<result property="qnaParentNO" column="qnaParentNO" />
		<result property="qnaList" column="qnaList" />
		<result property="qnaTitle" column="qnaTitle" />
		<result property="qnaText" column="qnaText" />

		<result property="qnaImage" column="qnaImage" />
		<result property="isProcess" column="isProcess" />
		<result property="qnaDate" column="qnaDate" />
		<result property="finishDate" column="finishDate" />
		<result property="id" column="id" />

	</resultMap>

	<!-- [문의 게시글 조회] -->
	<select id="selectAllQnaList" resultMap="qnaResult">
	<![CDATA[
		SELECT QNANO, QNAPARENTNO, QNALIST, QNATITLE, QNATEXT, QNAIMAGE, ISPROCESS, QNADATE, FINISHDATE, ID
		FROM B_QNA
	]]>
	</select>

	<!-- [문의 글쓰기] -->
	<insert id="insertQna" parameterType="QnaVO">
		<selectKey keyProperty="qnaNO" resultType="int"
			order="BEFORE">
			SELECT MAX(QNANO)+1 FROM B_QNA
		</selectKey>
	 <![CDATA[
		INSERT INTO B_QNA
		(QNANO, QNAPARENTNO, QNALIST, QNATITLE, QNATEXT, QNAIMAGE, QNADATE, ID)
		VALUES(#{qnaNO}, 0, #{qnaList}, #{qnaTitle}, #{qnaText}, #{qnaImage}, sysdate, 'sndlgudlsa123')
	 ]]>
	</insert>

	<!-- [문의 게시글 수정] -->
	<select id="selectOneQna" resultType="QnaVO" parameterType="int">
		<![CDATA[
		SELECT * FROM B_QNA WHERE qnaNO=#{qnaNO}
		]]>
	</select>
	
	<update id="updateQna" parameterType="QnaVO">
    <![CDATA[
		UPDATE B_QNA SET QNATITLE=#{qnaTitle}, QNALIST=#{qnaList}, QNATEXT=#{qnaText}, QNAIMAGE=#{qnaImage}
		WHERE QNANO=#{qnaNO}
    ]]>
	</update>

</mapper>