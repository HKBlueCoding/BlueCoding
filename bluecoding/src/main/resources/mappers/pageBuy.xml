<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.pagebuy">
	
	<!-- [페이지 구매 내역 추가]+기본 페이지 하나당 300원 -->
	<insert id="insertBuyPage" parameterType="PageBuyVO">
	 <![CDATA[
		INSERT INTO B_PAGEBUY (PAGEPAY, ID, PAGENO, PAGEPAYDATE, PISREFUND) 
		VALUES( 300, #{id}, #{pageNO}, #{pagePayDate}, 'Y')
	 ]]>
	</insert>
	
	<update id="checkBuy" parameterType="hashmap">
	 <![CDATA[
	  	UPDATE B_PAGEBUY 
	  	SET PISREFUND=''
	  	WHERE id=#{id} AND pageNO = #{pageNO}
	 ]]>
	</update>
	
	<select id="selectOneBuyPage" resultType="int" parameterType="hashmap">
	 <![CDATA[
	 	SELECT count(pageNO)
	 	FROM B_PAGEBUY 
	 	WHERE id=#{id} AND pageNO=#{pageNO}
	 ]]>
	</select>
</mapper>